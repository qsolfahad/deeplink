<html>
  <head>
    <script
      src="https://ap-gateway.mastercard.com/static/checkout/checkout.min.js"
      data-error="errorCallback"
      data-cancel="cancelCallback"
    ></script>

    <script type="text/javascript">
      async function initializeCheckout() {
        try {
          const response = await fetch('http://localhost:3000/create-session');
          const data = await response.json();
          console.log('Session Data:', data);

          Checkout.configure({
            session: {
              id: data.session.id,
            },
          });
        } catch (error) {
          console.error('Error initializing checkout:', error);
        }
      }

      function errorCallback(error) {
        console.log(JSON.stringify(error));
      }

      function cancelCallback() {
        console.log('Payment cancelled');
      }

      window.onload = initializeCheckout;
    </script>
  </head>

  <body>
    <div id="embed-target"> </div>
    <input
      type="button"
      value="Pay with Embedded Page"
      onclick="Checkout.showEmbeddedPage('#embed-target');"
    />
    <input
      type="button"
      value="Pay with Payment Page"
      onclick="Checkout.showPaymentPage();"
    />
  </body>
</html>
